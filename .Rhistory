mutate(dept = str_trim(dept)) %>%
mutate(dept = as.factor(dept)) %>%
mutate(dept = fct_relevel(dept, "HR", "FIN", "IT", "MKT"))
View(records_cleaned)
levels(records_cleaned$dept)
records_cleaned
knitr::opts_chunk$set(echo       = TRUE,
fig.height = 3,
fig.width  = 6,
fig.align  = "center")
ggplot2::theme_set(ggplot2::theme_bw())
#| message: false
library(tidyverse)
library(lubridate)
pos_na <- function(v1, v2) {
if(length(v1) != length(v2)) {
return("The vectors are not the same length.")
} else {
na <- which(is.na(v1) & is.na(v2))
return(na)
}
}
one <- c(1, NA, 2)
two <- c(NA, NA)
pos_na(one, two)
a <- c(NA, NA, 2)
b <- c(NA, NA, 2)
pos_na(a, b)
add <- c(NA, 5, NA)
sub <- c(NA, NA, NA)
pos_na(add, sub)
app <- c(NA, NA, NA, 2, NA, 4, NA)
ban <- c(NA, NA, 2, 4, 4, NA, NA)
pos_na(app, ban)
r <- c(1, NA, NA, 2, NA, 4, NA)
w <- c(NA, -5, 2, 4, 4, NA, 11)
pos_na(r, w)
pos_na2 <- function(v1, v2) {
outputs <- list(which(is.na(v1) & is.na(v2)),
"The vectors are not the same length.")
logicvariable <- 2 - (length(v1) == length(v2))
return(outputs[[logicvariable]])
}
one <- c(1, NA, 2)
two <- c(NA, NA)
pos_na2(one, two)
a <- c(NA, NA, 2)
b <- c(NA, NA, 2)
pos_na2(a, b)
add <- c(NA, 5, NA)
sub <- c(NA, NA, NA)
pos_na2(add, sub)
app <- c(NA, NA, NA, 2, NA, 4, NA)
ban <- c(NA, NA, 2, 4, 4, NA, NA)
pos_na2(app, ban)
r <- c(1, NA, NA, 2, NA, 4, NA)
w <- c(NA, -5, 2, 4, 4, NA, 11)
pos_na2(r, w)
wmata <- read.csv("wmata_ridership.csv")
wmata
str(wmata)
wmata <- wmata %>%
mutate(prop = Total/sum(Total)) %>%
filter(!substr(wmata$Date, 3, 4) == "04" & !substr(wmata$Date, 3, 4) == "05")
jan <- wmata[substr(wmata$Date, 6, 7) == "01", ]
feb <- wmata[substr(wmata$Date, 6, 7) == "02", ]
mar <- wmata[substr(wmata$Date, 6, 7) == "03", ]
apr <- wmata[substr(wmata$Date, 6, 7) == "04", ]
may <- wmata[substr(wmata$Date, 6, 7) == "05", ]
jun <- wmata[substr(wmata$Date, 6, 7) == "06", ]
jul <- wmata[substr(wmata$Date, 6, 7) == "07", ]
aug <- wmata[substr(wmata$Date, 6, 7) == "08", ]
sep <- wmata[substr(wmata$Date, 6, 7) == "09", ]
oct <- wmata[substr(wmata$Date, 6, 7) == "10", ]
nov <- wmata[substr(wmata$Date, 6, 7) == "11", ]
dec <- wmata[substr(wmata$Date, 6, 7) == "12", ]
ggplot(data = jan, mapping = aes(x = prop)) +
geom_boxplot(col = "orchid", fill = "white") +
labs(x = "Proportion of daily rides",
title = "Boxplot of January WMATA ridership") +
theme_bw()
ggplot(data = feb, mapping = aes(x = prop)) +
geom_boxplot(col = "blue", fill = "white") +
labs(x = "Proportion of daily rides",
title = "Boxplot of February WMATA ridership") +
theme_bw()
ggplot(data = mar, mapping = aes(x = prop)) +
geom_boxplot(col = "darkgreen", fill = "white") +
labs(x = "Proportion of daily rides",
title = "Boxplot of March WMATA ridership") +
theme_bw()
ggplot(data = apr, mapping = aes(x = prop)) +
geom_boxplot(col = "red", fill = "white") +
labs(x = "Proportion of daily rides",
title = "Boxplot of April WMATA ridership") +
theme_bw()
ggplot(data = may, mapping = aes(x = prop)) +
geom_boxplot(col = "brown", fill = "white") +
labs(x = "Proportion of daily rides",
title = "Boxplot of May WMATA ridership") +
theme_bw()
ggplot(data = jun, mapping = aes(x = prop)) +
geom_boxplot(col = "black", fill = "white") +
labs(x = "Proportion of daily rides",
title = "Boxplot of June WMATA ridership") +
theme_bw()
ggplot(data = jul, mapping = aes(x = prop)) +
geom_boxplot(col = "darkorange", fill = "white") +
labs(x = "Proportion of daily rides",
title = "Boxplot of July WMATA ridership") +
theme_bw()
ggplot(data = aug, mapping = aes(x = prop)) +
geom_boxplot(col = "darkred", fill = "white") +
labs(x = "Proportion of daily rides",
title = "Boxplot of August WMATA ridership") +
theme_bw()
ggplot(data = sep, mapping = aes(x = prop)) +
geom_boxplot(col = "deeppink", fill = "white") +
labs(x = "Proportion of daily rides",
title = "Boxplot of September WMATA ridership") +
theme_bw()
ggplot(data = oct, mapping = aes(x = prop)) +
geom_boxplot(col = "darkblue", fill = "white") +
labs(x = "Proportion of daily rides",
title = "Boxplot of October WMATA ridership") +
theme_bw()
ggplot(data = nov, mapping = aes(x = prop)) +
geom_boxplot(col = "purple", fill = "white") +
labs(x = "Proportion of daily rides",
title = "Boxplot of November WMATA ridership") +
theme_bw()
ggplot(data = dec, mapping = aes(x = prop)) +
geom_boxplot(col = "coral", fill = "white") +
labs(x = "Proportion of daily rides",
title = "Boxplot of December WMATA ridership") +
theme_bw()
V <- c("Bears", "Lions", "Dolphins", "Eagles", "Bengals")
V[c(1, 3, 5)]
animals <- c(1, 3, 5)
empty <- c()
for(i in animals) {
empty <- c(empty, V[i])
}
empty
V[c(1, 3, 5)]
V[c(1, 3, 5)]
V[c(-2, -4)]
V[c(TRUE, FALSE, TRUE, FALSE, TRUE)]
Vnames <- c(bears = "Bears", lions = "Lions", dolphins = "Dolphins",
eagles = "Eagles", bengals = "Bengals")
Vnames[c("bears", "dolphins", "bengals")]
records <- c(
"Steve McQueen | 2020-01-15 | HR",
"B. Smith | 15/02/2021 | FIN",
"Carlos M | March 3, 2019 | IT",
"D. Lee | 2018/07/30 | HR",
"Alain Delon | 04-12-2020 | MKT"
)
records
records_cleaned <- str_split(records, "\\|", simplify = TRUE)
library(parsedate)
records_cleaned$hire_date <- parse_date(records_cleaned$hire_date)
View(records_cleaned)
records_cleaned$V2 <- parse_date(records_cleaned$V2)
V2 <- parse_date(V2)
records_cleaned$V2 <- parse_date(V2)
records_cleaned$V2 <- parse_date(records_cleaned$V2)
records_cleaned <- str_split(records, "\\|", simplify = TRUE)
records_cleaned <- setNames(as.data.frame(records_cleaned), c("name", "hire_date",
"dept"))
library(parsedate)
records_cleaned$hire_date <- parse_date(records_cleaned$hire_date)
View(records_cleaned)
records_cleaned <- records_cleaned %>%
mutate(dept = str_trim(dept)) %>%
mutate(dept = as.factor(dept)) %>%
mutate(dept = fct_relevel(dept, "HR", "FIN", "IT", "MKT"))
records_cleaned
View(records_cleaned)
records_cleaned %>%
mutate(years_worked = today() - hire_date)
records_cleaned %>%
mutate(years_worked = (today() - hire_date))/365)
print(substr(hire_date, 6, 7))
print(substr(records_cleaned$hire_date, 6, 7))
print(substr(records_cleaned$hire_date, 3, 4))
substr(records_cleaned$hire_date, 3, 4)
26 - substr(records_cleaned$hire_date, 3, 4)
26 - print(substr(records_cleaned$hire_date, 3, 4))
as.numeric(substr(records_cleaned$hire_date, 3, 4))
years <- as.numeric(substr(records_cleaned$hire_date, 3, 4))
26 - years
floor(as.numeric(Sys.Date() - records_cleaned$hire_date) / 365.25)
26 - years
26 - years
records_cleaned %>%
for i in hire_date {
records_cleaned %>%
for (i in 1:length(hire_date)) {
years <- as.numeric(substr(records_cleaned$hire_date, 3, 4))
26 - years
}
records_cleaned %>%
for (i in 1:length(hire_date)) {
years[i] <- as.numeric(substr(records_cleaned$hire_date, 3, 4))
26 - years
}
records_cleaned %>%
for (i in 1:length(hire_date)) {
years[i] <- as.numeric(substr(records_cleaned$hire_date, 3, 4))
}
for (i in 1:length(records_cleaned$hire_date)) {
years[i] <- as.numeric(substr(records_cleaned$hire_date, 3, 4))
}
for (i in 1:length(records_cleaned$hire_date)) {
years[i] <- as.numeric(substr(records_cleaned$hire_date, 3, 4))
26-years
}
for (i in 1:nrow(records_cleaned$hire_date)) {
years[i] <- as.numeric(substr(records_cleaned$hire_date, 3, 4))
26-years
}
for (i in 1:nrow(records_cleaned$hire_date)) {
years[i] <- as.numeric(substr(records_cleaned$hire_date, 3, 4))
26-years
}
for (i in 1:nrow(records_cleaned)) {
years[i] <- as.numeric(substr(records_cleaned$hire_date, 3, 4))
26-years
}
years <- as.numeric(substr(records_cleaned$hire_date, 3, 4))
26 - years
for (i in 1:nrow(records_cleaned)) {
years[i] <- as.numeric(substr(records_cleaned$hire_date, 3, 4))
26-years
}
for (i in 1:nrow(records_cleaned)) {
years[i] <- as.numeric(substr(records_cleaned$hire_date[i], 3, 4))
26-years
}
for (i in 1:nrow(records_cleaned)) {
years[i] <- as.numeric(substr(records_cleaned$hire_date[i], 3, 4))
26-years
}
for (i in 1:nrow(records_cleaned)) {
years[i] <- year(records_cleaned$hire_date[i])
26-years
}
for (i in 1:nrow(records_cleaned)) {
years[i] <- year(records_cleaned$hire_date[i])
2026-years
}
for (i in 1:nrow(records_cleaned)) {
years[i] <- year(records_cleaned$hire_date[i])
print(2026-years)
}
for (i in 1:nrow(records_cleaned)) {
years[i] <- floor(today() - records_cleaned$hire_date[i])
print(years)
}
for (i in 1:nrow(records_cleaned)) {
years[i] <- floor(as.numeric(today() - records_cleaned$hire_date[i]) / 365.25)
print(years)
}
for (i in 1:nrow(records_cleaned)) {
years[i] <- year(records_cleaned$hire_date[i])
print(26-years)
}
for (i in 1:nrow(records_cleaned)) {
years[i] <- year(records_cleaned$hire_date[i])
print(2026-years)
}
records_cleaned[substr(records_cleaned$hire_date, 6, 7) > "02" & substr(records_cleaned$hire_date, 9, 10) > "6"]
records_cleaned[substr(records_cleaned$hire_date, 6, 7) > "02" & substr(records_cleaned$hire_date, 9, 10) > "06"]
substr(records_cleaned$hire_date, 6, 7) > "02" & substr(records_cleaned$hire_date, 9, 10) > "06"
substr(records_cleaned$hire_date, 6, 7) >= "02" & substr(records_cleaned$hire_date, 9, 10) > "06"
records_cleaned %>%
mutate(years_worked = floor(as.numeric(today() - hire_date) / 365.25))
records_cleaned %>%
mutate(years_worked = floor(time_length(interval(hire_date, today()), "years")))
floor(as.numeric(Sys.Date() - records_cleaned$hire_date) / 365.25)
years_worked <- numeric(nrow(records_cleaned))
for (i in 1:nrow(records_cleaned)) {
years_worked[i] <- floor(as.numeric(today() - records_cleaned$hire_date[i]) / 365.25)
}
knitr::opts_chunk$set(echo       = TRUE,
fig.height = 3,
fig.width  = 6,
fig.align  = "center")
ggplot2::theme_set(ggplot2::theme_bw())
#| message: false
library(tidyverse)
library(lubridate)
pos_na <- function(v1, v2) {
if(length(v1) != length(v2)) {
return("The vectors are not the same length.")
} else {
na <- which(is.na(v1) & is.na(v2))
return(na)
}
}
one <- c(1, NA, 2)
two <- c(NA, NA)
pos_na(one, two)
a <- c(NA, NA, 2)
b <- c(NA, NA, 2)
pos_na(a, b)
add <- c(NA, 5, NA)
sub <- c(NA, NA, NA)
pos_na(add, sub)
app <- c(NA, NA, NA, 2, NA, 4, NA)
ban <- c(NA, NA, 2, 4, 4, NA, NA)
pos_na(app, ban)
r <- c(1, NA, NA, 2, NA, 4, NA)
w <- c(NA, -5, 2, 4, 4, NA, 11)
pos_na(r, w)
pos_na2 <- function(v1, v2) {
outputs <- list(which(is.na(v1) & is.na(v2)),
"The vectors are not the same length.")
logicvariable <- 2 - (length(v1) == length(v2))
return(outputs[[logicvariable]])
}
one <- c(1, NA, 2)
two <- c(NA, NA)
pos_na2(one, two)
a <- c(NA, NA, 2)
b <- c(NA, NA, 2)
pos_na2(a, b)
add <- c(NA, 5, NA)
sub <- c(NA, NA, NA)
pos_na2(add, sub)
app <- c(NA, NA, NA, 2, NA, 4, NA)
ban <- c(NA, NA, 2, 4, 4, NA, NA)
pos_na2(app, ban)
r <- c(1, NA, NA, 2, NA, 4, NA)
w <- c(NA, -5, 2, 4, 4, NA, 11)
pos_na2(r, w)
wmata <- read.csv("wmata_ridership.csv")
wmata
str(wmata)
wmata <- wmata %>%
mutate(prop = Total/sum(Total)) %>%
filter(!substr(wmata$Date, 3, 4) == "04" & !substr(wmata$Date, 3, 4) == "05")
jan <- wmata[substr(wmata$Date, 6, 7) == "01", ]
feb <- wmata[substr(wmata$Date, 6, 7) == "02", ]
mar <- wmata[substr(wmata$Date, 6, 7) == "03", ]
apr <- wmata[substr(wmata$Date, 6, 7) == "04", ]
may <- wmata[substr(wmata$Date, 6, 7) == "05", ]
jun <- wmata[substr(wmata$Date, 6, 7) == "06", ]
jul <- wmata[substr(wmata$Date, 6, 7) == "07", ]
aug <- wmata[substr(wmata$Date, 6, 7) == "08", ]
sep <- wmata[substr(wmata$Date, 6, 7) == "09", ]
oct <- wmata[substr(wmata$Date, 6, 7) == "10", ]
nov <- wmata[substr(wmata$Date, 6, 7) == "11", ]
dec <- wmata[substr(wmata$Date, 6, 7) == "12", ]
ggplot(data = jan, mapping = aes(x = prop)) +
geom_boxplot(col = "orchid", fill = "white") +
labs(x = "Proportion of daily rides",
title = "Boxplot of January WMATA ridership") +
theme_bw()
ggplot(data = feb, mapping = aes(x = prop)) +
geom_boxplot(col = "blue", fill = "white") +
labs(x = "Proportion of daily rides",
title = "Boxplot of February WMATA ridership") +
theme_bw()
ggplot(data = mar, mapping = aes(x = prop)) +
geom_boxplot(col = "darkgreen", fill = "white") +
labs(x = "Proportion of daily rides",
title = "Boxplot of March WMATA ridership") +
theme_bw()
ggplot(data = apr, mapping = aes(x = prop)) +
geom_boxplot(col = "red", fill = "white") +
labs(x = "Proportion of daily rides",
title = "Boxplot of April WMATA ridership") +
theme_bw()
ggplot(data = may, mapping = aes(x = prop)) +
geom_boxplot(col = "brown", fill = "white") +
labs(x = "Proportion of daily rides",
title = "Boxplot of May WMATA ridership") +
theme_bw()
ggplot(data = jun, mapping = aes(x = prop)) +
geom_boxplot(col = "black", fill = "white") +
labs(x = "Proportion of daily rides",
title = "Boxplot of June WMATA ridership") +
theme_bw()
ggplot(data = jul, mapping = aes(x = prop)) +
geom_boxplot(col = "darkorange", fill = "white") +
labs(x = "Proportion of daily rides",
title = "Boxplot of July WMATA ridership") +
theme_bw()
ggplot(data = aug, mapping = aes(x = prop)) +
geom_boxplot(col = "darkred", fill = "white") +
labs(x = "Proportion of daily rides",
title = "Boxplot of August WMATA ridership") +
theme_bw()
ggplot(data = sep, mapping = aes(x = prop)) +
geom_boxplot(col = "deeppink", fill = "white") +
labs(x = "Proportion of daily rides",
title = "Boxplot of September WMATA ridership") +
theme_bw()
ggplot(data = oct, mapping = aes(x = prop)) +
geom_boxplot(col = "darkblue", fill = "white") +
labs(x = "Proportion of daily rides",
title = "Boxplot of October WMATA ridership") +
theme_bw()
ggplot(data = nov, mapping = aes(x = prop)) +
geom_boxplot(col = "purple", fill = "white") +
labs(x = "Proportion of daily rides",
title = "Boxplot of November WMATA ridership") +
theme_bw()
ggplot(data = dec, mapping = aes(x = prop)) +
geom_boxplot(col = "coral", fill = "white") +
labs(x = "Proportion of daily rides",
title = "Boxplot of December WMATA ridership") +
theme_bw()
V <- c("Bears", "Lions", "Dolphins", "Eagles", "Bengals")
V[c(1, 3, 5)]
animals <- c(1, 3, 5)
empty <- c()
for(i in animals) {
empty <- c(empty, V[i])
}
empty
V[c(1, 3, 5)]
V[c(1, 3, 5)]
V[c(-2, -4)]
V[c(TRUE, FALSE, TRUE, FALSE, TRUE)]
Vnames <- c(bears = "Bears", lions = "Lions", dolphins = "Dolphins",
eagles = "Eagles", bengals = "Bengals")
Vnames[c("bears", "dolphins", "bengals")]
records <- c(
"Steve McQueen | 2020-01-15 | HR",
"B. Smith | 15/02/2021 | FIN",
"Carlos M | March 3, 2019 | IT",
"D. Lee | 2018/07/30 | HR",
"Alain Delon | 04-12-2020 | MKT"
)
records
records_cleaned <- str_split(records, "\\|", simplify = TRUE)
records_cleaned <- setNames(as.data.frame(records_cleaned), c("name", "hire_date",
"dept"))
library(parsedate)
records_cleaned$hire_date <- parse_date(records_cleaned$hire_date)
records_cleaned <- records_cleaned %>%
mutate(dept = str_trim(dept)) %>%
mutate(dept = as.factor(dept)) %>%
mutate(dept = fct_relevel(dept, "HR", "FIN", "IT", "MKT"))
records_cleaned
substr(records_cleaned$hire_date, 3, 4) >= "02"
for (i in 1:nrow(records_cleaned)) {
yearhired <- year(records_cleaned$hire_date[i])
yeartoday <- year(today())
mmddhired <- as.numeric(format(records_cleaned$hire_date[i], "%m%d"))
today_mmdd <- as.numeric(format(today(), "%m%d"))
if (mmddhired > mmddtoday) {
years_worked[i] <- yeartoday - yearhired - 1
} else {
years_worked[i] <- current_year - hire_year
}
}
for (i in 1:nrow(records_cleaned)) {
yearhired <- year(records_cleaned$hire_date[i])
yeartoday <- year(today())
mmddhired <- as.numeric(format(records_cleaned$hire_date[i], "%m%d"))
mmddtoday <- as.numeric(format(today(), "%m%d"))
if (mmddhired > mmddtoday) {
years_worked[i] <- yeartoday - yearhired - 1
} else {
years_worked[i] <- current_year - hire_year
}
}
for (i in 1:nrow(records_cleaned)) {
yearhired <- year(records_cleaned$hire_date[i])
yeartoday <- year(today())
mmddhired <- as.numeric(format(records_cleaned$hire_date[i], "%m%d"))
mmddtoday <- as.numeric(format(today(), "%m%d"))
if (mmddhired > mmddtoday) {
years_worked[i] <- yeartoday - yearhired - 1
} else {
years_worked[i] <- yeartoday - yearhired
}
}
years_worked <- numeric(nrow(records_cleaned))
for (i in 1:nrow(records_cleaned)) {
yearhired <- year(records_cleaned$hire_date[i])
yeartoday <- year(today())
mmddhired <- as.numeric(format(records_cleaned$hire_date[i], "%m%d"))
mmddtoday <- as.numeric(format(today(), "%m%d"))
if (mmddhired > mmddtoday) {
years_worked[i] <- yeartoday - yearhired - 1
} else {
years_worked[i] <- yeartoday - yearhired
}
}
years_worked <- numeric(nrow(records_cleaned))
records_cleaned$years_worked <- for (i in 1:nrow(records_cleaned)) {
yearhired <- year(records_cleaned$hire_date[i])
yeartoday <- year(today())
mmddhired <- as.numeric(format(records_cleaned$hire_date[i], "%m%d"))
mmddtoday <- as.numeric(format(today(), "%m%d"))
if (mmddhired > mmddtoday) {
years_worked[i] <- yeartoday - yearhired - 1
} else {
years_worked[i] <- yeartoday - yearhired
}
}
View(records_cleaned)
years_worked
records_cleaned <- records_cleaned %>%
mutate(years_worked = years_worked)
View(records_cleaned)
records_cleaned
